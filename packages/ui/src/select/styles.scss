/* ═══════════════════════════════════════════════════════════════════════════════
   M3 SELECT - Based on material-components/material-web
   ═══════════════════════════════════════════════════════════════════════════════ */

.md-select {
    position: relative;
    min-width: 200px;

    &.disabled .md-select__field {
        cursor: not-allowed;
        opacity: 0.38;
        pointer-events: none;
    }

    /* Filled variant */
    &.filled {
        .md-select__field {
            padding: 8px 16px;
            background: var(--m3-color-surface-container-highest, rgba(230, 225, 229, 0.38));
            border: none;
            border-bottom: 1px solid var(--m3-color-on-surface-variant, #49454E);
            border-radius: var(--m3-shape-extra-small, 4px) var(--m3-shape-extra-small, 4px) 0 0;

            &:hover:not(.disabled) {
                background: var(--m3-color-surface-container-highest, rgba(230, 225, 229, 0.5));
            }
        }

        &.focused .md-select__field {
            border-bottom: 2px solid var(--m3-color-primary, #6750A4);
        }

        &.error .md-select__field {
            border-bottom-color: var(--m3-color-error, #B3261E);
        }
    }

    /* Outlined variant */
    &.outlined {
        .md-select__field {
            padding: 0 16px;
            background: transparent;
            border: 1px solid var(--m3-color-outline, rgba(120, 117, 121, 0.4));
            border-radius: var(--m3-shape-extra-small, 4px);

            &:hover:not(.disabled) {
                border-color: var(--m3-color-on-surface, #1C1B1F);
            }
        }

        &.focused .md-select__field {
            border: 2px solid var(--m3-color-primary, #6750A4);
            padding: 0 15px;
        }

        &.error .md-select__field {
            border-color: var(--m3-color-error, #B3261E);
        }
    }

    &.focused .md-select__label {
        color: var(--m3-color-primary, #6750A4);
    }

    &.error .md-select__label {
        color: var(--m3-color-error, #B3261E);
    }

    &.error .md-select__supporting {
        color: var(--m3-color-error, #B3261E);
    }

    &.open {
        .md-select__arrow {
            transform: rotate(180deg);
        }

        .md-select__menu {
            max-height: 256px;
            opacity: 1;
            box-shadow: var(--m3-elevation-2, 0 2px 6px rgba(0,0,0,0.15), 0 8px 24px rgba(0,0,0,0.15));
        }
    }

    /* ─── LIQUID GLASS VARIANT ─────────────────────────────────────────────────── */

    &.glass {
        .md-select__field {
            background: var(--glass-tint, rgba(255, 255, 255, 0.45));
            backdrop-filter: blur(var(--glass-blur, 20px));
            -webkit-backdrop-filter: blur(var(--glass-blur, 20px));
            border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
            border-radius: var(--m3-shape-medium, 12px);
        }

        &.focused .md-select__field {
            border-color: var(--m3-color-primary, #6750A4);
            border-width: 2px;
        }

        .md-select__menu {
            background: var(--glass-tint, rgba(255, 255, 255, 0.75));
            backdrop-filter: blur(var(--glass-blur, 20px));
            -webkit-backdrop-filter: blur(var(--glass-blur, 20px));
            border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.3));
            border-radius: 0 0 var(--m3-shape-medium, 12px) var(--m3-shape-medium, 12px);
        }

        .md-select__option:hover {
            background: var(--glass-hover, rgba(255, 255, 255, 0.2));
        }
    }
}

/* ─── FIELD ────────────────────────────────────────────────────────────────── */

.md-select__field {
    position: relative;
    display: flex;
    align-items: center;
    min-height: 56px;
    cursor: pointer;
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
    transition: border-color var(--m3-motion-duration-short, 150ms) var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1));
}

/* ─── LABEL ────────────────────────────────────────────────────────────────── */

.md-select__label {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    font-family: var(--m3-font-body, 'Inter', system-ui, sans-serif);
    color: var(--m3-color-on-surface-variant, #49454E);
    pointer-events: none;
    transition: top 150ms var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1)),
               transform 150ms var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1)),
               font-size 150ms var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1)),
               color 150ms var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1));

    &.floating {
        top: 8px;
        transform: translateY(0);
        font-size: 12px;
    }
}

/* ─── VALUE ────────────────────────────────────────────────────────────────── */

.md-select__value {
    flex: 1;
    font-size: 16px;
    font-family: var(--m3-font-body, 'Inter', system-ui, sans-serif);
    color: var(--m3-color-on-surface, #1C1B1F);
    min-height: 24px;
    display: flex;
    align-items: center;

    &.has-label {
        padding-top: 16px;
    }

    &.placeholder {
        color: var(--m3-color-on-surface-variant, #49454E);
    }
}

/* ─── ARROW ICON ───────────────────────────────────────────────────────────── */

.md-select__arrow {
    width: 24px;
    height: 24px;
    fill: var(--m3-color-on-surface-variant, #49454E);
    transition: transform var(--m3-motion-duration-short, 150ms) var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1));
    flex-shrink: 0;
}

/* ─── DROPDOWN MENU ────────────────────────────────────────────────────────── */

.md-select__menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    max-height: 0;
    overflow-y: auto;
    background: var(--m3-color-surface-container, rgba(255, 255, 255, 0.95));
    border-radius: 0 0 var(--m3-shape-extra-small, 4px) var(--m3-shape-extra-small, 4px);
    box-shadow: none;
    opacity: 0;
    z-index: 100;
    transition: max-height var(--m3-motion-duration-short, 150ms) var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1)),
                opacity var(--m3-motion-duration-short, 150ms) var(--m3-motion-easing-standard, cubic-bezier(0.2, 0, 0, 1));
}

/* ─── OPTION ───────────────────────────────────────────────────────────────── */

.md-select__option {
    position: relative;
    display: flex;
    align-items: center;
    padding: 12px 16px;
    cursor: pointer;
    font-size: 16px;
    font-family: var(--m3-font-body, 'Inter', system-ui, sans-serif);
    color: var(--m3-color-on-surface, #1C1B1F);
    overflow: hidden;
    transition: background var(--m3-motion-duration-short, 100ms);

    &:hover {
        background: var(--m3-color-surface-container-highest, rgba(230, 225, 229, 0.38));
    }

    &.selected {
        background: var(--m3-color-secondary-container, rgba(139, 92, 246, 0.12));
        color: var(--m3-color-on-secondary-container, #6750A4);
    }

    &.option-disabled {
        cursor: not-allowed;
        opacity: 0.38;
        pointer-events: none;
    }
}

/* ─── SUPPORTING TEXT ──────────────────────────────────────────────────────── */

.md-select__supporting {
    font-size: 12px;
    font-family: var(--m3-font-body, 'Inter', system-ui, sans-serif);
    color: var(--m3-color-on-surface-variant, #49454E);
    margin-top: 4px;
    padding-left: 16px;
    display: block;
}
